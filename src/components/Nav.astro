---
import { Icon } from 'astro-icon/components';
import Link from "@components/Link.astro";
import { navData } from "@data/siteData";
import { langNavData } from "@data/siteData";
const { translations, pageLang  } = Astro.props;
// const pathArray = Astro.url.pathname.split('/');
// const pageLang = pathArray[1] ? pathArray[1] : 'en';

---

<header class="p-4 sticky top-0 bg-slate-900">
  
  <nav aria-label={translations.navMain} class="max-w-screen-xl gap-3 flex flex-col md:flex-row mx-auto items-center justify-between">
    <a href={pageLang !== 'en' ? `/${pageLang}` : `/`} class="group rounded-full flex flex-row mx-auto md:mx-0 items-center gap-4 justify-center outline-none">
      <Icon aria-hidden="true" name="logo" class="w-8 h-8 md:w-12 md:h-12 p-2 bg-teal-300 outline-2 outline-offset-2 outline-teal-400 group-hover:outline group-focus-visible:outline rounded-full" />
    <span class="sronly font-black text-xl text-gray-100">{translations.siteTitle}</span>
    </a>
   
    
    <ul id="main-menu" class="grid grid-flow-col auto-cols-fr place-items-center capitalize fit-content md:ml-auto gap-6">
      
    
      {
        navData.map((i) => (
          
        pageLang === i.lang && (Astro.url.pathname === i.href ? 
            <li class="underline font-bold">
              <Link href={i.href} intent={"ghost"} size={"small"}>{i.name}</Link>
            </li>  
            :
            <li>
              <Link href={i.href} intent={"ghost"} size={"small"}>{i.name}</Link>
            </li>  
            
            
         
        )))
      }
    
    </ul>
 
   
  </nav>
  
  <nav aria-label={translations.navLang} class="flex gap-3 fixed bottom-4 left-4 shadow-md rounded-md text-gray-100 bg-slate-900">
    <details class="cursor-pointer group max-h-10 open:max-h-80 min-w-60 transition-all duration-300">
      <summary class="flex gap-3 rounded-md group-open:ring-transparent ring-offset-2 focus-visible:ring focus-visible:ring-2 focus-visible:ring-pink-300 items-center justify-center px-3 py-2 text-sm uppercase"><Icon class="group-open:rotate-90 transition-all duration-300" name="chevron" />{translations.langChooser} <Icon name={pageLang} /></summary>
    
  <ul id="language-menu" class="flex flex-col gap-2 px-3 pb-3 pt-2 border-t border-t-white transition-all duration-300">
      
    
    {
      langNavData.map((i) => (
        
      pageLang === i.lang && (Astro.url.pathname === i.href ? 
          <li class="underline font-bold">
            <Link href={i.href} intent={"ghost"} size={"small"}>{i.name}</Link>
          </li>  
          :
          <li>
            <Link href={i.href} intent={"ghost"} size={"small"}>{i.name}</Link>
          </li>  
          
          
       
      )))
    }
  </ul>
</details>
</nav> 
</header>